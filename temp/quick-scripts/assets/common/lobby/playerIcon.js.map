{"version":3,"sources":["playerIcon.js"],"names":["cc","Class","extends","Component","properties","playerSprite","default","type","Sprite","playerIconAnim","Animation","setData","userInfo","playerId","id","userId","node","active","Game","GameManager","userInfoReq","init","clientEvent","on","eventType","playerAccountGet","userInfoSet","recvMsg","account","headIcon","loader","load","url","err","texture","spriteFrame","SpriteFrame","Rect","width","height","bind","onDestroy","off","reset","deadAnim","play","onLoad"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,sBAAc;AACVC,qBAAS,IADC;AAEVC,kBAAMP,GAAGQ;AAFC,SADN;AAKRC,wBAAgB;AACZH,qBAAS,IADG;AAEZC,kBAAMP,GAAGU;AAFG;AALR,KAHP;AAaLC,aAAS,iBAASC,QAAT,EAAmB;AACxB,aAAKA,QAAL,GAAgBA,QAAhB;AACA,aAAKC,QAAL,GAAgBD,SAASE,EAAT,GAAcF,SAASE,EAAvB,GAA4BF,SAASG,MAArD;AACA,aAAKV,YAAL,CAAkBW,IAAlB,CAAuBC,MAAvB,GAAgC,IAAhC;AACAC,aAAKC,WAAL,CAAiBC,WAAjB,CAA6B,KAAKP,QAAlC;AACH,KAlBI;;AAoBLQ,UAAM,gBAAW;AACb,aAAKT,QAAL,GAAgB,IAAhB;AACA,aAAKP,YAAL,CAAkBW,IAAlB,CAAuBC,MAAvB,GAAgC,KAAhC;AACAK,oBAAYC,EAAZ,CAAeD,YAAYE,SAAZ,CAAsBC,gBAArC,EAAuD,KAAKC,WAA5D,EAAyE,IAAzE;AACH,KAxBI;;AA0BLA,iBAAa,qBAASC,OAAT,EAAkB;AAC3B,YAAIA,QAAQC,OAAR,IAAmB,KAAKf,QAA5B,EAAsC;AAClC,gBAAIc,QAAQE,QAAR,IAAoBF,QAAQE,QAAR,KAAqB,GAA7C,EAAkD;AAC9C7B,mBAAG8B,MAAH,CAAUC,IAAV,CAAe,EAACC,KAAKL,QAAQE,QAAd,EAAwBtB,MAAM,KAA9B,EAAf,EAAqD,UAAS0B,GAAT,EAAcC,OAAd,EAAuB;AACxE,wBAAIC,cAAc,IAAInC,GAAGoC,WAAP,CAAmBF,OAAnB,EAA4BlC,GAAGqC,IAAH,CAAQ,CAAR,EAAW,CAAX,EAAcH,QAAQI,KAAtB,EAA6BJ,QAAQK,MAArC,CAA5B,CAAlB;AACA,yBAAKlC,YAAL,CAAkB8B,WAAlB,GAAgCA,WAAhC;AACH,iBAHoD,CAGnDK,IAHmD,CAG9C,IAH8C,CAArD;AAIH;AACJ;AACJ,KAnCI;;AAqCLC,aArCK,uBAqCO;AACRnB,oBAAYoB,GAAZ,CAAgBpB,YAAYE,SAAZ,CAAsBC,gBAAtC,EAAwD,KAAKC,WAA7D,EAA0E,IAA1E;AACH,KAvCI;;;AAyCLiB,WAAO,iBAAW;AACd,aAAKlC,cAAL,CAAoBO,IAApB,CAAyBC,MAAzB,GAAkC,KAAlC;AACH,KA3CI;;AA6CL2B,cAAU,oBAAW;AACjB,aAAKnC,cAAL,CAAoBO,IAApB,CAAyBC,MAAzB,GAAkC,IAAlC;AACA,aAAKR,cAAL,CAAoBoC,IAApB;AACH,KAhDI;;AAkDLC,UAlDK,oBAkDI;AACL,aAAKzB,IAAL;AACH;AApDI,CAAT","file":"playerIcon.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\common\\lobby","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        playerSprite: {\r\n            default: null,\r\n            type: cc.Sprite\r\n        },\r\n        playerIconAnim: {\r\n            default: null,\r\n            type: cc.Animation\r\n        }\r\n    },\r\n    setData: function(userInfo) {\r\n        this.userInfo = userInfo;\r\n        this.playerId = userInfo.id ? userInfo.id : userInfo.userId;\r\n        this.playerSprite.node.active = true;\r\n        Game.GameManager.userInfoReq(this.playerId);\r\n    },\r\n\r\n    init: function() {\r\n        this.userInfo = null;\r\n        this.playerSprite.node.active = false;\r\n        clientEvent.on(clientEvent.eventType.playerAccountGet, this.userInfoSet, this);\r\n    },\r\n\r\n    userInfoSet: function(recvMsg) {\r\n        if (recvMsg.account == this.playerId) {\r\n            if (recvMsg.headIcon && recvMsg.headIcon !== \"-\") {\r\n                cc.loader.load({url: recvMsg.headIcon, type: 'png'}, function(err, texture) {\r\n                    var spriteFrame = new cc.SpriteFrame(texture, cc.Rect(0, 0, texture.width, texture.height));\r\n                    this.playerSprite.spriteFrame = spriteFrame;\r\n                }.bind(this));\r\n            }\r\n        }\r\n    },\r\n\r\n    onDestroy() {\r\n        clientEvent.off(clientEvent.eventType.playerAccountGet, this.userInfoSet, this);\r\n    },\r\n\r\n    reset: function() {\r\n        this.playerIconAnim.node.active = false;\r\n    },\r\n\r\n    deadAnim: function() {\r\n        this.playerIconAnim.node.active = true;\r\n        this.playerIconAnim.play();\r\n    },\r\n\r\n    onLoad() {\r\n        this.init();\r\n    }\r\n});\r\n"]}