{"version":3,"sources":["uiGamePanel.js"],"names":["mvs","require","GLB","uiPanel","cc","Class","extends","properties","hitClip","default","url","AudioClip","hitByClip","onLoad","_super","playerHearts","nodeDict","children","enemyHearts","countDownLb","getComponent","Label","node","on","Node","EventType","TOUCH_START","fly","clientEvent","eventType","roundStart","playerDead","roundOver","gameOver","timeOver","leaveRoomNotifyMed","leaveRoom","exit","playerIcons","push","data","Game","GameManager","gameState","GameState","Over","uiFunc","openUI","obj","uiTip","friends","friendIds","filter","x","leaveRoomInfo","userId","length","setData","bind","start","MAX_PLAYER_COUNT","active","id","playerUserIds","murderId","userInfo","Animation","play","audioEngine","Id","i","playerId","deadAnim","AudioSource","clearInterval","countDownInterval","reset","countDown","curRound","string","toString","times","roundSeconds","setInterval","isRoomOwner","timeOverMsg","Play","msg","action","TIME_OVER","sendEventEx","friendHearts","player","PlayerManager","getPlayerByUserId","isDied","PLAYER_FLY_EVENT","onDestroy","off"],"mappings":"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","file":"uiGamePanel.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\common\\script","sourcesContent":["var mvs = require(\"Matchvs\");\r\nvar GLB = require(\"Glb\");\r\nvar uiPanel = require(\"uiPanel\");\r\ncc.Class({\r\n    extends: uiPanel,\r\n    properties: {\r\n        hitClip: {\r\n            default: null,\r\n            url: cc.AudioClip\r\n        },\r\n        hitByClip: {\r\n            default: null,\r\n            url: cc.AudioClip\r\n        }\r\n    },\r\n\r\n    onLoad() {\r\n        this._super();\r\n        this.playerHearts = this.nodeDict[\"playerHeartLayout\"].children;\r\n        this.enemyHearts = this.nodeDict[\"enemyHeartLayout\"].children;\r\n        this.countDownLb = this.nodeDict[\"countDownLb\"].getComponent(cc.Label);\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.fly, this);\r\n        clientEvent.on(clientEvent.eventType.roundStart, this.roundStart, this);\r\n        clientEvent.on(clientEvent.eventType.playerDead, this.playerDead, this);\r\n        clientEvent.on(clientEvent.eventType.roundOver, this.roundOver, this);\r\n        clientEvent.on(clientEvent.eventType.gameOver, this.gameOver, this);\r\n        clientEvent.on(clientEvent.eventType.timeOver, this.timeOver, this);\r\n        clientEvent.on(clientEvent.eventType.leaveRoomNotifyMed, this.leaveRoom, this);\r\n\r\n        this.nodeDict[\"exit\"].on(\"click\", this.exit, this);\r\n        this.playerIcons = [];\r\n        this.playerIcons.push(this.nodeDict[\"player1Icon\"].getComponent(\"playerIcon\"));\r\n        this.playerIcons.push(this.nodeDict[\"player2Icon\"].getComponent(\"playerIcon\"));\r\n        this.playerIcons.push(this.nodeDict[\"enemy1Icon\"].getComponent(\"playerIcon\"));\r\n        this.playerIcons.push(this.nodeDict[\"enemy2Icon\"].getComponent(\"playerIcon\"));\r\n    },\r\n\r\n    leaveRoom(data) {\r\n        if (Game.GameManager.gameState !== GameState.Over) {\r\n            uiFunc.openUI(\"uiTip\", function(obj) {\r\n                var uiTip = obj.getComponent(\"uiTip\");\r\n                if (uiTip) {\r\n                    var friends = Game.GameManager.friendIds.filter(function(x) {\r\n                        return x === data.leaveRoomInfo.userId;\r\n                    });\r\n                    if (friends.length > 0) {\r\n                        uiTip.setData(\"队友离开了游戏\");\r\n                    } else {\r\n                        uiTip.setData(\"对手离开了游戏\");\r\n                    }\r\n                }\r\n            }.bind(this));\r\n        }\r\n    },\r\n\r\n    exit() {\r\n        uiFunc.openUI(\"uiExit\");\r\n    },\r\n\r\n    start() {\r\n        if (GLB.MAX_PLAYER_COUNT === 2) {\r\n            this.nodeDict[\"player2Icon\"].active = false;\r\n            this.nodeDict[\"enemy2Icon\"].active = false;\r\n            this.nodeDict[\"player1Icon\"].getComponent(\"playerIcon\").setData({ id: GLB.playerUserIds[0] });\r\n            this.nodeDict[\"enemy1Icon\"].getComponent(\"playerIcon\").setData({ id: GLB.playerUserIds[1] });\r\n        } else {\r\n            this.nodeDict[\"player1Icon\"].getComponent(\"playerIcon\").setData({ id: GLB.playerUserIds[0] });\r\n            this.nodeDict[\"player2Icon\"].getComponent(\"playerIcon\").setData({ id: GLB.playerUserIds[1] });\r\n            this.nodeDict[\"enemy1Icon\"].getComponent(\"playerIcon\").setData({ id: GLB.playerUserIds[2] });\r\n            this.nodeDict[\"enemy2Icon\"].getComponent(\"playerIcon\").setData({ id: GLB.playerUserIds[3] });\r\n        }\r\n    },\r\n\r\n    playerDead: function(data) {\r\n        if (data.murderId === GLB.userInfo.id) {\r\n            this.nodeDict[\"hit\"].getComponent(cc.Animation).play();\r\n            cc.audioEngine.play(this.hitClip, false, 1);\r\n        } else if (data.Id === GLB.userInfo.id && data.murderId) {\r\n            this.nodeDict[\"hitBy\"].getComponent(cc.Animation).play();\r\n            cc.audioEngine.play(this.hitByClip, false, 1);\r\n        }\r\n        for (var i = 0; i < this.playerIcons.length; i++) {\r\n            if (this.playerIcons[i].playerId === data.Id) {\r\n                this.playerIcons[i].deadAnim();\r\n            }\r\n        }\r\n    },\r\n\r\n    gameOver: function() {\r\n        this.nodeDict['gameOver'].getComponent(cc.Animation).play();\r\n        this.nodeDict['gameOver'].getComponent(cc.AudioSource).play();\r\n        clearInterval(this.countDownInterval);\r\n    },\r\n\r\n    timeOver: function() {\r\n        this.nodeDict['timeOver'].getComponent(cc.Animation).play();\r\n        this.nodeDict['timeOver'].getComponent(cc.AudioSource).play();\r\n        clearInterval(this.countDownInterval);\r\n    },\r\n\r\n    roundStart: function() {\r\n        // 回合画面表现--\r\n        for (var i = 0; i < this.playerIcons.length; i++) {\r\n            this.playerIcons[i].reset();\r\n        }\r\n        this.countDown();\r\n        var curRound = Game.GameManager.curRound;\r\n        this.nodeDict['roundCntLb'].getComponent(cc.Label).string = curRound.toString();\r\n        this.nodeDict['roundStart'].getComponent(cc.Animation).play();\r\n        this.nodeDict['rope'].getComponent(cc.Animation).play();\r\n        this.nodeDict['readyGo'].getComponent(cc.Animation).play();\r\n        this.nodeDict['readyGo'].getComponent(cc.AudioSource).play();\r\n    },\r\n\r\n    countDown: function() {\r\n        clearInterval(this.countDownInterval);\r\n        var times = Game.roundSeconds;\r\n        this.countDownLb.string = times;\r\n        this.countDownInterval = setInterval(function() {\r\n            times--;\r\n            if (times < 0) {\r\n                clearInterval(this.countDownInterval);\r\n                if (GLB.isRoomOwner) {\r\n                    this.timeOverMsg();\r\n                }\r\n            } else if (Game.GameManager.gameState !== GameState.Play) {\r\n                clearInterval(this.countDownInterval);\r\n            } else {\r\n                this.countDownLb.string = times;\r\n            }\r\n            if (times === 10) {\r\n                this.nodeDict[\"clock\"].getComponent(cc.Animation).play();\r\n            }\r\n        }.bind(this), 1000);\r\n    },\r\n\r\n    timeOverMsg: function() {\r\n        var msg = {\r\n            action: GLB.TIME_OVER\r\n        };\r\n        Game.GameManager.sendEventEx(msg);\r\n    },\r\n\r\n    roundOver: function() {\r\n        var i;\r\n        for (i = 0; i < this.playerHearts.length; i++) {\r\n            if (i < Game.GameManager.friendHearts) {\r\n                this.playerHearts[i].active = true;\r\n            } else {\r\n                this.playerHearts[i].active = false;\r\n            }\r\n        }\r\n        for (i = 0; i < this.enemyHearts.length; i++) {\r\n            if (i < Game.GameManager.enemyHearts) {\r\n                this.enemyHearts[i].active = true;\r\n            } else {\r\n                this.enemyHearts[i].active = false;\r\n            }\r\n        }\r\n        clearInterval(this.countDownInterval);\r\n    },\r\n\r\n    fly: function() {\r\n        if (Game.GameManager.gameState !== GameState.Play) {\r\n            return;\r\n        }\r\n        var player = Game.PlayerManager.getPlayerByUserId(GLB.userInfo.id);\r\n        if (!player || player.isDied) {\r\n            return;\r\n        }\r\n        var msg = {\r\n            action: GLB.PLAYER_FLY_EVENT\r\n        };\r\n        Game.GameManager.sendEventEx(msg);\r\n    },\r\n\r\n    onDestroy() {\r\n        clientEvent.off(clientEvent.eventType.roundStart, this.roundStart, this);\r\n        clientEvent.off(clientEvent.eventType.roundOver, this.roundOver, this);\r\n        clientEvent.off(clientEvent.eventType.gameOver, this.gameOver, this);\r\n        clientEvent.off(clientEvent.eventType.playerDead, this.playerDead, this);\r\n        clientEvent.off(clientEvent.eventType.timeOver, this.timeOver, this);\r\n        clientEvent.off(clientEvent.eventType.leaveRoomNotifyMed, this.leaveRoom, this);\r\n\r\n    }\r\n});\r\n"]}